<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Five in a Row Online</title>
    <link rel="stylesheet" href="../css/FIAR.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script type="text/javascript" src="../js/jquery-3.6.0.min.js"></script>
</head>

<body id="body">

<datalist id = "board-enum">
    <option value="15x15"></option>
    <option value="17x17"></option>
    <option value="19x19"></option>
</datalist>

<datalist id = "type-enum">
    <option value="Gomoku"></option>
    <option value="Gobang"></option>
    <option value="Renju"></option>
    <option value="Pente"></option>
    <option value="Ninuki Renju"></option>
    <option value="x-Gewinnt"></option>
</datalist>

<div class="container-fluid mainPart">
    <div class="row formularDivs">
        <span class="col-md-4"></span>
        <span class="col-md-4 d-flex justify-content-center"><h2>Start a new Game</h2></span>
        <span class="col-md-4"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-4"></span>
        <span class="col-md-4 d-flex justify-content-center">
            <p>
                Please Provide the following details: <br/>
            </p></span>
        <span class="col-md-4"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            Size of the Board: &nbsp;<input list="board-enum" name="input-size" id = "input-size" value=""/>
        </span>
        <span class="col-md-3"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            Type of Game: &nbsp;<input list="type-enum" name="input-type" id = "input-type" value=""/>
        </span>
        <span class="col-md-3"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            Benefit sharing: &nbsp;<input type="checkbox" name="input-bs" id = "input-bs" value=""/>
        </span>
        <span class="col-md-3"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            Game Code: &nbsp;<input type="text" name="input-Code" id = "input-Code" value=""/>
        </span>
        <span class="col-md-3"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            <button id="StartGame">Host Game</button>
        </span>
        <span class="col-md-3"></span>
    </div>
    <div class="row formularDivs">
        <span class="col-md-3"></span>
        <span class="col-md-6 d-flex justify-content-center">
            <a href="../Homepage.html"> Back to Homepage </a>
        </span>
        <span class="col-md-3"></span>
    </div>
</div>


<script>
    $("#StartGame").click(function() {
        var checked
        if ($('#input-bs').is(":checked"))
        {
            checked = true;
        } else {
            checked = false;
        }

        var size = $("#input-size").val().substring(0,1)

        var game = {
            "GameCode" :  $("#input-Code").val(),
            "PlayerOnesTurn" : true,
            "Board" : {
            "Size" : parseInt(size),
                "Tiles" : [
                {
                    "Status" : "empty",
                    "x-coordinate" : 9,
                    "y-coordinate" : 3
                }
            ]
        },
            "Type" : $("#input-type").val(),
            "BenefitSharing" : checked,
            "GameStatus" : "isRunning"
        };
        console.log(game);
        $.ajax({
            url: 'https://tranquil-ravine-52782-34bf80f0f653.herokuapp.com/api/game',
            type: 'post',
            dataType: 'json',
            contentType: 'application/json',
            success: function (data) {
                alert(data);
                localStorage.setItem('gamecode',$('#input-Code').val())
                window.location.href = "Game.html"
            },
            data: JSON.stringify(game),
            processData: false,
            contentType: "application/json; charset=UTF-8",
            error: function (xhr, ajaxOptions, thrownError) {
                if(xhr.status == 500){
                    alert("Bitte geben sie die geforderten Daten ein!")
                }
                //alert('Error: ' + xhr.status + '   ' + thrownError);
            }
        });
    });
</script>


</body>
</html>
