<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Five in a Row Online</title>
  <link rel="stylesheet" href="../css/FIAR.css">
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <script type="text/javascript" src="../js/jquery-3.6.0.min.js"></script>
</head>

<body id="body">

<div class="container-fluid fixed-top" id="header">
  <div class="row">
    <span class="col-md-4 myheadline" >Five in a Row</span>

    <span class="col-md-5"></span>

    <span class="col-md-3 " id="headerButtons">
      <div class="row flex-nowrap">
        <span class="col-md-1"></span>
        <a class="col-md-5  myButton" href="account/LockOn.html">
          Log In
        </a>

        <a class="col-md-5  myButton" href="account/LockOff.html">
          Log out
        </a>
        <span class="col-md-1"></span>
      </div>
    </span>
  </div>
</div>

<div class="container-fluid mainPart">
  <div class="row formularDivs">
    <span class="col-md-4"></span>
    <span class="col-md-4 d-flex justify-content-center"><h2>Join a Game</h2></span>
    <span class="col-md-4"></span>
  </div>
  <div class="row formularDivs">
    <span class="col-md-4"></span>
    <span class="col-md-4 d-flex justify-content-center">
            <p>
                Please Provide the following details: <br/>
            </p></span>
    <span class="col-md-4"></span>
  </div>

  <div class="row formularDivs">
    <span class="col-md-3"></span>
    <span class="col-md-6 d-flex justify-content-center">
            Game Code: &nbsp;<input type="text" name="input-Code" id = "input-Code" value=""/>
        </span>
    <span class="col-md-3"></span>
  </div>
  <div class="row formularDivs">
    <span class="col-md-3"></span>
    <span class="col-md-6 d-flex justify-content-center">
            <button id="joinGame">Join Game</button>
        </span>
    <span class="col-md-3"></span>
  </div>
  <div class="row formularDivs">
    <span class="col-md-3"></span>
    <span class="col-md-6 d-flex justify-content-center">
            <a href="../Homepage.html"> Back to Homepage </a>
        </span>
    <span class="col-md-3"></span>
  </div>
</div>

<div class="container-fluid fixed-bottom" id="footer">
  <div class="row ">
    <span class="col-md-3"></span>

    <span class="col-md-3 centerText"></span>

    <span class="col-md-2 centerText"></span>

    <span class="col-md-4 " id="footerButtons">
      <div class="row flex-nowrap">
        <span class="col-md-1"></span>
          <input type="password" id="clearPropsPassword">
        <button class="col-md-5  myButton" id="cPButton">
            Clear Properties
        </button>
        <span class="col-md-1"></span>
      </div>
    </span>
  </div>
</div>

<script>
  $("#joinGame").click(function() {

    let gameCode = $("#input-Code").val();

    $.ajax({
      url: 'https://tranquil-ravine-52782-34bf80f0f653.herokuapp.com/api/game?GameCode=' + gameCode,
      type: 'get',
      dataType: 'json',
      contentType: 'application/json',
      processData: false,
      contentType: "application/json; charset=UTF-8",
      success: function (data) {
        if(data === null){
          alert("No Game existing with Code: "+gameCode)
        } else {
          localStorage.setItem('gameCode',gameCode)
          localStorage.setItem("localPlayer", "Two")
          window.location.href = "Game.html"
        }
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert('Error: ' + xhr.status + '   ' + thrownError);
      }
    });
  });

</script>

</body>
</html>
